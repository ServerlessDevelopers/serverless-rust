<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Lambda Function per Verb | Serverless Rust</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://serverless-rust.com/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lambda Function per Verb | Serverless Rust"><meta data-rh="true" name="description" content="Lambda Function API per Verb"><meta data-rh="true" property="og:description" content="Lambda Function API per Verb"><meta data-rh="true" name="keywords" content="rust,lambda,api gateway"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://serverless-rust.com/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb"><link data-rh="true" rel="alternate" href="https://serverless-rust.com/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb" hreflang="en"><link data-rh="true" rel="alternate" href="https://serverless-rust.com/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JWKWKGFW71"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JWKWKGFW71",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.fda55b57.css">
<script src="/assets/js/runtime~main.d59cbaa0.js" defer="defer"></script>
<script src="/assets/js/main.599914a0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Serverless Rust</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/why-rust">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/serverlessdevelopers/serverless-rust/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/why-rust">Why Rust?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/fundamentals">Fundamentals</a><button aria-label="Expand sidebar category &#x27;Fundamentals&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/common-patterns">Common Patterns</a><button aria-label="Collapse sidebar category &#x27;Common Patterns&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/api">API</a><button aria-label="Collapse sidebar category &#x27;API&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/patterns/api-patterns/cors-domain-allow-list">CORS Origin Allow List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb">Lambda Function per Verb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/patterns/api-patterns/web-framework-on-lambda">Web Framework on Lambda</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/cicd-1">CI/CD</a><button aria-label="Expand sidebar category &#x27;CI/CD&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/containers">Containers</a><button aria-label="Expand sidebar category &#x27;Containers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/database">Database</a><button aria-label="Expand sidebar category &#x27;Database&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/messaging">Messaging</a><button aria-label="Expand sidebar category &#x27;Messaging&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/security">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/common-patterns"><span itemprop="name">Common Patterns</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/api"><span itemprop="name">API</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lambda Function per Verb</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lambda Function per Verb</h1></header><style>[data-ch-theme="dark-plus"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #D4D4D4;--ch-t-background: #1E1E1E;--ch-t-lighter-inlineBackground: #1e1e1ee6;--ch-t-editor-background: #1E1E1E;--ch-t-editor-foreground: #D4D4D4;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #007FD4;--ch-t-tab-activeBackground: #1E1E1E;--ch-t-tab-activeForeground: #ffffff;--ch-t-tab-inactiveBackground: #2D2D2D;--ch-t-tab-inactiveForeground: #ffffff80;--ch-t-tab-border: #252526;--ch-t-tab-activeBorder: #1E1E1E;--ch-t-editorGroup-border: #444444;--ch-t-editorGroupHeader-tabsBackground: #252526;--ch-t-editorLineNumber-foreground: #858585;--ch-t-input-background: #3C3C3C;--ch-t-input-foreground: #D4D4D4;--ch-t-icon-foreground: #C5C5C5;--ch-t-sideBar-background: #252526;--ch-t-sideBar-foreground: #D4D4D4;--ch-t-sideBar-border: #252526;--ch-t-list-activeSelectionBackground: #094771;--ch-t-list-activeSelectionForeground: #fffffe;--ch-t-list-hoverBackground: #2A2D2E; }</style>
<p>Writing an API with Lambda is a topic that is pretty well covered on the internet.  However, there are so many choices of packages, project structure, Lambda size, runtimes, and many other decisions that can overwhelm even the most accomplished builder.  Add into the mix the addition of Rust, and things take on an even different slant than with something you are comfortable with.</p>
<p>If this feels like you, then let this article walk you through some design choices that&#x27;ll help you get started.  And when you get to the end, you will be able to package this up and add your custom code and deploy something into AWS.</p>
<h2 id="lets-make-some-design-choices">Let&#x27;s make some design choices</h2>
<p>This article will take the following stances in order to allow you to focus on learning how to build an API with Rust.</p>
<ol>
<li>Every verb in this REST API will have its own Lambda Handler</li>
<li>Will make use of this <a href="https://docs.rs/lambda_http/latest/lambda_http/">Crate</a> for handling events and dealing with the Proxy Request</li>
<li>A shared library will be a part of the build to reuse code.</li>
</ol>
<p>With those clarifications out of the way, let&#x27;s get started!</p>
<h2 id="project-structure">Project structure</h2>
<p>Settling on a project structure is sometimes the hardest part of a new build.  For simplicity and order, I like to put my code in the root directory of the project under a folder named <code>lambdas</code>.  I find that when I do that, I can also then segement my infrastructure as code into a separate directory named <code>infra</code>.  When working on projects, it&#x27;s easier to collapse my brain on half of the solution just like folding the directory in my editor.</p>
<p>A template for this pattern can be found under the <a href="https://github.com/serverlessdevelopers/serverless-rust/tree/main/templates/patterns/api-patterns/lambda-per-verb/">./templates</a> directory in the GitHub repo. You can use the template to get started building with API Gateway and Lambda.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>infra</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  - to be filled out by your IaC</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>lambdas</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  - delete-by-id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  - get-by-id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  - post</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  - put-by-id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  - shared</span></div></div><br></code></div></div>
<p>The balance of this tutorial will dig into most of the <code>lambdas/&lt;project&gt;</code> solutions.</p>
<h2 id="lambda-code">Lambda Code</h2>
<p>Let&#x27;s start off with the <code>post</code> Lambda</p>
<h3 id="post">Post</h3>
<section class="ch-section"><p>For each of these Lambdas, the main function is going to look the same.  I won&#x27;t focus on using AWS SDK Clients, they are simply going to demonstrate who to parse payloads and return serialized objects.</p><p>When operating a POST request, the client is going to send a JSON payloadt to the endpoint.  The Lambda will need to handle that event, dersialize it into the struct I want and then do something with that data.  Usually persist it somewhere, but in the below example, it&#x27;s just going to return it back out as a <code>ViewModel</code> object.</p><div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>#[tokio::main]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn main() -&gt; Result&lt;(), Error&gt;{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    tracing_subscriber::fmt()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_max_level(tracing::Level::INFO)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disable printing the name of the module in every log line.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_target(false)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disabling time is handy because CloudWatch will add the ingestion time.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .without_time()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .init();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    run(service_fn(handler)).await</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div><p>One thing to note is the <span class="ch-section-link" data-active="false"><code>tokio macro</code></span> macro.  Macros in Rust are signals to the compiler to generate some code based upon the macros&#x27; definition.</p><p>The tokio macro allows the <span class="ch-section-link" data-active="false"><code>main</code></span> function to run asynchronous, which is what the Lambda handler function requires.</p></section>
<p>With the main function defined, the last piece to do is build the handler.  The code below is a little verbose, but simply to demonstrate the handling of Optional values that the Rust language provides.  This can be simplified in spots but will be just fine for the demo code.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>async fn handler(event: Request) -&gt; Result&lt;impl IntoResponse, Error&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let body = event.payload::&lt;PostModel&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    match body {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Ok(item) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            match item {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Some(i) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    // convert to the model</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let model: Model = i.into();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    // do some work</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    // convert back to view model</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let view_model: ViewModel = model.into();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let serde_model = serde_json::to_string(&amp;view_model)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .status(200)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .body(serde_model)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                None =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .status(400)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .body(&quot;&quot;.to_string())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Err(e) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .status(400)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .body(e.to_string())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>Let&#x27;s take a minute to walk through some key points of the above function.</p>
<p>First, by using the lambda_http crate, we gain some convienence methods that make working with requests easier.  The <code>event.payload</code> line converts the incoming JSON body into the PostModel struct defined in the shared project.</p>
<p>The second thing to note is that this sample doesn&#x27;t actually persist anything into the database but it still goes through the process of converting the incoming payload into a struct Model and then back out into a ViewModel.</p>
<p>The final point to pay attention to is that using the <code>match</code> operation in Rust gives you a bunch of chances to shape the payload that is returned to the client.</p>
<h3 id="get-by-id">Get by ID</h3>
<p>With items persisting, you would have something to fetch from the database.  In the case of this handler, the sample is returning out a mocked Model and then converting it into a ViewModel.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>use lambda_http::{Error, IntoResponse, Request, service_fn, run, Response, Body, RequestPayloadExt, RequestExt};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use tracing::info;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use shared::{Model, ViewModel};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>#[tokio::main]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn main() -&gt; Result&lt;(), Error&gt;{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    tracing_subscriber::fmt()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_max_level(tracing::Level::INFO)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disable printing the name of the module in every log line.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_target(false)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disabling time is handy because CloudWatch will add the ingestion time.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .without_time()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .init();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    run(service_fn(handler)).await</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn handler(event: Request) -&gt; Result&lt;impl IntoResponse, Error&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // get the path parameter</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let id = event</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .path_parameters_ref()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .and_then(|params| params.first(&quot;id&quot;))</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .unwrap();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    info!(&quot;id: {:?}&quot;, id);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // fetch the model from the DB</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let model = Model::new(&quot;New Model&quot;.to_string());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // convert to a view model</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let view_model:ViewModel = model.into();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let view_mode_serde = serde_json::to_string(&amp;view_model)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .status(200)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .body(view_mode_serde)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 id="put-by-id">Put by ID</h3>
<p>Adding a PUT method will allow your clients to update the resources you expose.  The PUT endpoint combines the work we&#x27;ve been doing with POST and GET.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>use lambda_http::{Error, IntoResponse, Request, service_fn, run, Response, Body, RequestPayloadExt, RequestExt};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use tracing::info;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use shared::{Model, PostModel, PutModel, ViewModel};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>#[tokio::main]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn main() -&gt; Result&lt;(), Error&gt;{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    tracing_subscriber::fmt()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_max_level(tracing::Level::INFO)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disable printing the name of the module in every log line.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_target(false)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disabling time is handy because CloudWatch will add the ingestion time.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .without_time()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .init();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    run(service_fn(handler)).await</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn handler(event: Request) -&gt; Result&lt;impl IntoResponse, Error&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // get the path parameter</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let id = event</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .path_parameters_ref()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .and_then(|params| params.first(&quot;id&quot;))</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .unwrap();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    info!(&quot;id: {:?}&quot;, id);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let body = event.payload::&lt;PutModel&gt;();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    match body {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Ok(item) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            match item {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                Some(i) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    // convert to the model</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let model: Model = i.into();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    // do some work</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    // convert back to view model</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let view_model: ViewModel = model.into();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let serde_model = serde_json::to_string(&amp;view_model)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .status(200)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .body(serde_model)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                None =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .status(400)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .body(&quot;&quot;.to_string())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                        .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                    Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Err(e) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .status(400)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .body(e.to_string())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h3 id="delete-by-id">Delete by ID</h3>
<p>And lastly, there is the DELETE method.  Delete should grab the ID from the path and then execute the delete request and set the response to 204.  The most basic Lambda would look like this.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>use lambda_http::{Error, IntoResponse, Request, service_fn, run, Response, Body, RequestPayloadExt, RequestExt};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use tracing::info;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use shared::{Model, ViewModel};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>#[tokio::main]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn main() -&gt; Result&lt;(), Error&gt;{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    tracing_subscriber::fmt()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_max_level(tracing::Level::INFO)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disable printing the name of the module in every log line.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .with_target(false)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        // disabling time is handy because CloudWatch will add the ingestion time.</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .without_time()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .init();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    run(service_fn(handler)).await</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>async fn handler(event: Request) -&gt; Result&lt;impl IntoResponse, Error&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let id = event</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .path_parameters_ref()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .and_then(|params| params.first(&quot;id&quot;))</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .unwrap();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    info!(&quot;id: {:?}&quot;, id);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // execute the delete in the DB</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let resp = Response::builder()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .status(204)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .header(&quot;content-type&quot;, &quot;text/json&quot;)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .body(&quot;&quot;.to_string())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        .map_err(Box::new)?;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    Ok(resp)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<h2 id="shared-code">Shared Code</h2>
<p>At this point, you&#x27;ve got the shell of an API build with Rust and Lambda.  Every one of these functions though depended upon some shared code.  With the project structure outlined at the top of the article, a <code>shared</code> directory which is a Rust Crate contains the models, data transfer objects, and other reusable code for these Lambdas.  Unlike interperted languages, Rust code needs to have these shared pieces of functionality compiled into the final binary.</p>
<p>Rust crates can take on many shapes, but in its most basic form, it can simply be a project that has a <code>lib.rs</code> file where the structs and functions are defined.</p>
<p>The shared <code>lib.rs</code> that supports the above code defines its structs and functions in the below sample.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>use serde::{Deserialize, Serialize};</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>use uuid::Uuid;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>pub struct Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub id: String,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub name: String</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>#[derive(Serialize, Debug)]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>pub struct ViewModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub id: String,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub name: String</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>#[derive(Deserialize, Debug)]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>pub struct PostModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub name: String</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>#[derive(Deserialize, Debug)]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>pub struct PutModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub id: String,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub name: String</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>impl Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub fn new(name: String) -&gt; Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            id: Uuid::new_v4().to_string(),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            name</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>impl ViewModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    pub fn new(id: String, name: String) -&gt; ViewModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        ViewModel { id, name }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>impl From&lt;Model&gt; for ViewModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    fn from(model: Model) -&gt; Self {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        ViewModel {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            id: model.id,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            name: model.name</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>impl From&lt;PostModel&gt; for Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    fn from(model: PostModel) -&gt; Self {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            id: Uuid::new_v4().to_string(),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            name: model.name</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>impl From&lt;PutModel&gt; for Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    fn from(model: PutModel) -&gt; Self {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        Model {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            id: model.id,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>            name: model.name</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br></code></div></div>
<p>And to use this code in the Lambda binaries, add this line to the Cargo.toml file in each of the Lambdas.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>[package]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>name = &quot;get-by-id&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>version.workspace = true</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>edition.workspace = true</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>authors.workspace = true</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>license.workspace = true</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>[dependencies]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>shared = { path = &quot;../shared&quot; }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>lambda_http = &quot;0.10.0&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>tokio = { version = &quot;1.36.0&quot;, features = [&quot;macros&quot;] }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>tracing-subscriber = &quot;0.3.18&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>tracing = &quot;0.1.40&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>uuid = { version = &quot;1.7.0&quot;, features = [&quot;v4&quot;,&quot;fast-rng&quot;,&quot;macro-diagnostics&quot;]}</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>serde_json = &quot;1.0.114&quot;</span></div></div><br></code></div></div>
<p>And to wrap it all up, the Worspace Cargo.toml file that pulls everything together.</p>
<div class="ch-codeblock not-prose" data-ch-theme="dark-plus"><div class="ch-code-wrapper ch-code" data-ch-measured="false"><code class="ch-code-scroll-parent"><br><div><div style="display:inline-block;margin-left:16px"><span>[workspace]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>members = [ &quot;lambdas/delete-by-id&quot;,&quot;lambdas/get-by-id&quot;, &quot;lambdas/post&quot;, &quot;lambdas/put-by-id&quot;, &quot;lambdas/shared&quot;]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>resolver = &quot;2&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>[workspace.package]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>version = &quot;1.0.0&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>authors = [&quot;Benjamen Pyle&quot;, &quot;James Eastham&quot;]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>license = &quot;GPL-3&quot;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>edition = &quot;2021&quot;</span></div></div><br></code></div></div>
<h2 id="congrats">Congrats</h2>
<p>And with that, you know have an API with a Lambda per Verb built in Rust!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/patterns/api-patterns/cors-domain-allow-list"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CORS Origin Allow List</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/patterns/api-patterns/web-framework-on-lambda"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Web Framework on Lambda</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lets-make-some-design-choices" class="table-of-contents__link toc-highlight">Let&#39;s make some design choices</a></li><li><a href="#project-structure" class="table-of-contents__link toc-highlight">Project structure</a></li><li><a href="#lambda-code" class="table-of-contents__link toc-highlight">Lambda Code</a><ul><li><a href="#post" class="table-of-contents__link toc-highlight">Post</a></li><li><a href="#get-by-id" class="table-of-contents__link toc-highlight">Get by ID</a></li><li><a href="#put-by-id" class="table-of-contents__link toc-highlight">Put by ID</a></li><li><a href="#delete-by-id" class="table-of-contents__link toc-highlight">Delete by ID</a></li></ul></li><li><a href="#shared-code" class="table-of-contents__link toc-highlight">Shared Code</a></li><li><a href="#congrats" class="table-of-contents__link toc-highlight">Congrats</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/why-rust">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Built by @plantpowerjames and @benjamenpyle</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/plantpowerjames" target="_blank" rel="noopener noreferrer" class="footer__link-item">@plantpowerjames</a></li><li class="footer__item"><a href="https://twitter.com/benjamenpyle" target="_blank" rel="noopener noreferrer" class="footer__link-item">@benjamenpyle</a></li><li class="footer__item"><a href="https://github.com/serverlessdevelopers/serverless-rust/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report Issues on GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  2024 Serverless Rust. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>