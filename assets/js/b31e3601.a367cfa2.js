"use strict";(self.webpackChunkinteractive_docs=self.webpackChunkinteractive_docs||[]).push([[2874],{4352:(o,t,e)=>{e.r(t),e.d(t,{CH:()=>y,assets:()=>D,chCodeConfig:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>i});e(6540);var n=e(4848),s=e(8453),r=e(4754);const l={sidebar_position:1,title:"DynamoDB Basic Operations",description:"Demonstrate basic DynamoDB operations with the AWS SDK",keywords:["rust","lambda","dynamodb","aws","aws sdk","sdk"]},c=void 0,p={id:"patterns/database-patterns/ddb-basic-operations",title:"DynamoDB Basic Operations",description:"Demonstrate basic DynamoDB operations with the AWS SDK",source:"@site/docs/patterns/database-patterns/ddb-basic-operations.md",sourceDirName:"patterns/database-patterns",slug:"/patterns/database-patterns/ddb-basic-operations",permalink:"/docs/patterns/database-patterns/ddb-basic-operations",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"DynamoDB Basic Operations",description:"Demonstrate basic DynamoDB operations with the AWS SDK",keywords:["rust","lambda","dynamodb","aws","aws sdk","sdk"]},sidebar:"tutorialSidebar",previous:{title:"Database",permalink:"/docs/category/database"},next:{title:"DynamoDB Streams",permalink:"/docs/patterns/database-patterns/ddb-basic-stream"}},D={},i=[{value:"Introduction",id:"introduction",level:2},{value:"DynamoDB Operations",id:"dynamodb-operations",level:2},{value:"Creating a Client",id:"creating-a-client",level:3},{value:"GetItem Request",id:"getitem-request",level:3},{value:"PutItem Request",id:"putitem-request",level:3},{value:"UpdateItem Request",id:"updateitem-request",level:3},{value:"DeleteItem Request",id:"deleteitem-request",level:3},{value:"Scan Request",id:"scan-request",level:3},{value:"Running the Sample",id:"running-the-sample",level:2},{value:"Congratulations",id:"congratulations",level:2}],y={annotations:r.hk,Code:r.Cy,Section:r.wn,SectionLink:r.W_,SectionCode:r.bx},a={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:void 0,showCopyButton:void 0,themeName:"dark-plus"};function C(o){const t=Object.assign({h2:"h2",p:"p",a:"a",ul:"ul",li:"li",h3:"h3",blockquote:"blockquote",code:"code",ol:"ol"},(0,s.R)(),o.components);return y||h("CH",!1),y.Code||h("CH.Code",!0),y.Section||h("CH.Section",!0),y.SectionCode||h("CH.SectionCode",!0),y.SectionLink||h("CH.SectionLink",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="dark-plus"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #D4D4D4;--ch-t-background: #1E1E1E;--ch-t-lighter-inlineBackground: #1e1e1ee6;--ch-t-editor-background: #1E1E1E;--ch-t-editor-foreground: #D4D4D4;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #007FD4;--ch-t-tab-activeBackground: #1E1E1E;--ch-t-tab-activeForeground: #ffffff;--ch-t-tab-inactiveBackground: #2D2D2D;--ch-t-tab-inactiveForeground: #ffffff80;--ch-t-tab-border: #252526;--ch-t-tab-activeBorder: #1E1E1E;--ch-t-editorGroup-border: #444444;--ch-t-editorGroupHeader-tabsBackground: #252526;--ch-t-editorLineNumber-foreground: #858585;--ch-t-input-background: #3C3C3C;--ch-t-input-foreground: #D4D4D4;--ch-t-icon-foreground: #C5C5C5;--ch-t-sideBar-background: #252526;--ch-t-sideBar-foreground: #D4D4D4;--ch-t-sideBar-border: #252526;--ch-t-list-activeSelectionBackground: #094771;--ch-t-list-activeSelectionForeground: #fffffe;--ch-t-list-hoverBackground: #2A2D2E; }'}}),"\n",(0,n.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"../../fundamentals/aws-sdk-rust",children:"AWS SDK for Rust"})," has been developed to simplify operations with various AWS services including ",(0,n.jsx)(t.a,{href:"https://docs.rs/aws-sdk-dynamodb/latest/aws_sdk_dynamodb/",children:"DynamoDB"}),".  By leveraging the SDK, you can take advantage of the data plane operations exposed over the API like GetItem, PutItem, Scan and the other core DynamoDB operations."]}),"\n",(0,n.jsxs)(t.p,{children:["This article looks to explore the foundational operations that you will encounter when working with AWS, DynamoDB and Rust.  They will be applicable whether you are building and shipping with ",(0,n.jsx)(t.a,{href:"/docs/fundamentals/how-lambda-works",children:"Lambda"})," or with Containers."]}),"\n",(0,n.jsx)(t.h2,{id:"dynamodb-operations",children:"DynamoDB Operations"}),"\n",(0,n.jsx)(t.p,{children:"In this article we are going to cover the following operations:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#creating-a-client",children:"Creating a DynamoDB SDK client"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#getitem-request",children:"GetItem"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#putitem-request",children:"PutItem"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#updateitem-request",children:"UpdateItem"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#deleteitem-request",children:"DeleteItem"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#scan-request",children:"Scan"})}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Topics not covered but will be in future articles include BatchItem operations, Transactions and Paginiation."}),"\n",(0,n.jsx)(t.h3,{id:"creating-a-client",children:"Creating a Client"}),"\n",(0,n.jsx)(t.p,{children:"When working with any of the services via the AWS SDK for Rust, you first need to create a client that can interact with its API.  This client is usually shared throughout the lifetime of your service so it's essentially a singleton instance."}),"\n",(0,n.jsx)(t.p,{children:"First, in the Cargo.toml, you need to tell Cargo that you want to bring in the DynamoDB SDK."}),"\n",(0,n.jsx)(y.Code,{codeConfig:a,northPanel:{tabs:["Cargo.toml"],active:"Cargo.toml",heightRatio:1},files:[{name:"Cargo.toml",focus:"",code:{lines:[{tokens:[{content:"[dependencies]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"# more contents omitted for brevity",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"aws-config",props:{style:{color:"#9CDCFE"}}},{content:" = { ",props:{style:{color:"#D4D4D4"}}},{content:"features",props:{style:{color:"#9CDCFE"}}},{content:" = [",props:{style:{color:"#D4D4D4"}}},{content:'"behavior-version-latest"',props:{style:{color:"#CE9178"}}},{content:"], ",props:{style:{color:"#D4D4D4"}}},{content:"version",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.0.1"',props:{style:{color:"#CE9178"}}},{content:" }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"aws-sdk-dynamodb",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.2.0"',props:{style:{color:"#CE9178"}}}]}],lang:"toml"},annotations:[]}],children:(0,n.jsx)(y.Code,{codeConfig:a,northPanel:{tabs:["Cargo.toml"],active:"Cargo.toml",heightRatio:1},files:[{name:"Cargo.toml",focus:"",code:{lines:[{tokens:[{content:"[dependencies]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"# more contents omitted for brevity",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"aws-config",props:{style:{color:"#9CDCFE"}}},{content:" = { ",props:{style:{color:"#D4D4D4"}}},{content:"features",props:{style:{color:"#9CDCFE"}}},{content:" = [",props:{style:{color:"#D4D4D4"}}},{content:'"behavior-version-latest"',props:{style:{color:"#CE9178"}}},{content:"], ",props:{style:{color:"#D4D4D4"}}},{content:"version",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.0.1"',props:{style:{color:"#CE9178"}}},{content:" }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"aws-sdk-dynamodb",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.2.0"',props:{style:{color:"#CE9178"}}}]}],lang:"toml"},annotations:[]}]})}),"\n",(0,n.jsxs)(y.Section,{codeConfig:a,northPanel:{tabs:["client.rs"],active:"client.rs",heightRatio:1},files:[{name:"client.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"new_client",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"is_local",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"region_provider",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"RegionProviderChain",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"default_provider",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"or_else",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"us-west-2"',props:{style:{color:"#CE9178"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"sdk_config",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"aws_config",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_env",props:{style:{color:"#DCDCAA"}}},{content:"().",props:{style:{color:"#D4D4D4"}}},{content:"region",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"region_provider",props:{style:{color:"#9CDCFE"}}},{content:").",props:{style:{color:"#D4D4D4"}}},{content:"load",props:{style:{color:"#DCDCAA"}}},{content:"().",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:";",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    if ",props:{style:{color:"#C586C0"}}},{content:"is_local",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_ascii_lowercase",props:{style:{color:"#DCDCAA"}}},{content:"() == ",props:{style:{color:"#D4D4D4"}}},{content:'"true"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"() {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        let ",props:{style:{color:"#569CD6"}}},{content:"config",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"aws_sdk_dynamodb",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"config",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Builder",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from",props:{style:{color:"#DCDCAA"}}},{content:"(&",props:{style:{color:"#D4D4D4"}}},{content:"sdk_config",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            .",props:{style:{color:"#D4D4D4"}}},{content:"endpoint_url",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"http://localhost:8000"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            .",props:{style:{color:"#D4D4D4"}}},{content:"region",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Region",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_static",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"us-east-1"',props:{style:{color:"#CE9178"}}},{content:"))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            .",props:{style:{color:"#D4D4D4"}}},{content:"build",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        return ",props:{style:{color:"#C586C0"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_conf",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"config",props:{style:{color:"#9CDCFE"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"config",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"aws_sdk_dynamodb",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"config",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Builder",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from",props:{style:{color:"#DCDCAA"}}},{content:"(&",props:{style:{color:"#D4D4D4"}}},{content:"sdk_config",props:{style:{color:"#9CDCFE"}}},{content:").",props:{style:{color:"#D4D4D4"}}},{content:"build",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    Client",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_conf",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"config",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:[(0,n.jsx)(t.p,{children:"With dependencies pulled in, it's time to build a client."}),(0,n.jsxs)(t.p,{children:["Two things worth pointing out in the code below.  First up, ",(0,n.jsx)(y.SectionLink,{focus:"2:3",id:"focus://2:3",children:"the region"})," needs to be specified."]}),(0,n.jsxs)(t.p,{children:["The second thing to point out is that this code will allow the client to be ",(0,n.jsx)(y.SectionLink,{focus:"5:9",id:"focus://5:9",children:"configured locally"}),".  What this enables is the running of DynamoDB locally or in an integration test in a continuious integration pipeline."]}),(0,n.jsx)(y.SectionCode,{children:(0,n.jsx)(y.SectionCode,{})})]}),"\n",(0,n.jsx)(t.h3,{id:"getitem-request",children:"GetItem Request"}),"\n",(0,n.jsxs)(t.p,{children:["Each of the following sections will have a ",(0,n.jsx)(t.a,{href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_GetItem.html",children:"link"})," that references the specific documentation.  The point of this article isn't to describe how DynamoDB works, but more to highlight how to operate the functions with the AWS SDK for Rust."]}),"\n",(0,n.jsx)(t.p,{children:"For reference:"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"The GetItem operation returns a set of attributes for the item with the given primary key. If there is no matching item, GetItem does not return any data and there will be no Item element in the response. - AWS Documentation"}),"\n"]}),"\n",(0,n.jsxs)(y.Section,{codeConfig:a,northPanel:{tabs:["get_item_partition_key.rs","get_item_partition_and_range_key.rs"],active:"get_item_partition_key.rs",heightRatio:1},files:[{name:"get_item_partition_key.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"fetch_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"User",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"get_item",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"key",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(), ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"()))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"send",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:"?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    match ",props:{style:{color:"#C586C0"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:".item {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            let ",props:{style:{color:"#569CD6"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"serde_dynamo",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        },",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        None",props:{style:{color:"#4EC9B0"}}},{content:" => ",props:{style:{color:"#D4D4D4"}}},{content:"Err",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"NotFound",props:{style:{color:"#4EC9B0"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]},{name:"get_item_partition_and_range_key.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"fetch_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"User",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"> {    ",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"key_map",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"HashMap",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"> = [",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        (",props:{style:{color:"#D4D4D4"}}},{content:'"PK"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(), ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:")),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        (",props:{style:{color:"#D4D4D4"}}},{content:'"SK"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(), ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:")),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    ]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    .",props:{style:{color:"#D4D4D4"}}},{content:"iter",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    .",props:{style:{color:"#D4D4D4"}}},{content:"cloned",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    .",props:{style:{color:"#D4D4D4"}}},{content:"collect",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"get_item",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"set_key",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"key_map",props:{style:{color:"#9CDCFE"}}},{content:"))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"send",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:"?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    match ",props:{style:{color:"#C586C0"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:".item {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            let ",props:{style:{color:"#569CD6"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"serde_dynamo",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        },",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        None",props:{style:{color:"#4EC9B0"}}},{content:" => ",props:{style:{color:"#D4D4D4"}}},{content:"Err",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"NotFound",props:{style:{color:"#4EC9B0"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:[(0,n.jsxs)(t.p,{children:["There are two samples included below that showcase how to execute ",(0,n.jsx)(y.SectionLink,{focus:"3",id:"focus://3",children:(0,n.jsx)(t.code,{children:"get_item"})}),"."]}),(0,n.jsx)(t.p,{children:"The key things to note are that you can specify key as a single partition key or you can use a HashMap to use a compound partition key and range key if the table requires."}),(0,n.jsx)(t.p,{children:"What is really nice about working with item that are returned from DynamoDB, the very familiar serde crate that is used throughout Rust for working with JSON can be used for this data as well which is also JSON."}),(0,n.jsxs)(y.SectionCode,{children:[(0,n.jsx)(y.SectionCode,{}),(0,n.jsx)(y.SectionCode,{})]})]}),"\n",(0,n.jsx)(t.h3,{id:"putitem-request",children:"PutItem Request"}),"\n",(0,n.jsx)(t.p,{children:"A PutItem is an update of the entire item that exists in DynamoDB under a specific key."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Creates a new item, or replaces an old item with a new item. If an item that has the same primary key as the new item already exists in the specified table, the new item completely replaces the existing item. You can perform a conditional put operation (add a new item if one with the specified primary key doesn't exist), or replace an existing item if it has certain attribute values. You can return the item's attribute values in the same operation, using the ReturnValues parameter. - AWS"}),"\n"]}),"\n",(0,n.jsxs)(y.Section,{codeConfig:a,northPanel:{tabs:["put_item.rs"],active:"put_item.rs",heightRatio:1},files:[{name:"put_item.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"create_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    client",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    table_name",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    item",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"_",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"put_item",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(), ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"get_id",props:{style:{color:"#DCDCAA"}}},{content:"()))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"name"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(), ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"get_name",props:{style:{color:"#DCDCAA"}}},{content:"()))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:'            "description"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"get_description",props:{style:{color:"#DCDCAA"}}},{content:"()),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:'            "entity_type"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"get_entity_type",props:{style:{color:"#DCDCAA"}}},{content:"()),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:'            "updated_at"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"N",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"get_updated_at",props:{style:{color:"#DCDCAA"}}},{content:"().",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"()),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:'            "created_at"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"N",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"get_created_at",props:{style:{color:"#DCDCAA"}}},{content:"().",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"()),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"send",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:"?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:[(0,n.jsxs)(t.p,{children:["Using PutItem requires that the item's attributes be supplied in the request.  Remember, this is a replacement of the item that was there before.  They key is specified as part of the entity as well so you won't see a \"key\" function like on the ",(0,n.jsx)(t.a,{href:"#getitem-request",children:"GetItem"}),"."]}),(0,n.jsx)(y.SectionCode,{children:(0,n.jsx)(y.SectionCode,{})})]}),"\n",(0,n.jsx)(t.h3,{id:"updateitem-request",children:"UpdateItem Request"}),"\n",(0,n.jsx)(t.p,{children:"When you only want to update parts of an item, you can use the UpdateItem request that DynamoDB provides.  It's defined like this:"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Edits an existing item's attributes, or adds a new item to the table if it does not already exist. You can put, delete, or add attribute values. You can also perform a conditional update on an existing item (insert a new attribute name-value pair if it doesn't exist, or replace an existing name-value pair if it has certain expected attribute values). - AWS"}),"\n"]}),"\n",(0,n.jsxs)(y.Section,{codeConfig:a,northPanel:{tabs:["update_item.rs"],active:"update_item.rs",heightRatio:1},files:[{name:"update_item.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"update_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"timestamp",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"i64",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<(), ",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"_",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"update_item",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"key",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"()))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"update_expression",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"set updated_at = :updated_at"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"expression_attribute_values",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:'            ":updated_at"',props:{style:{color:"#CE9178"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"N",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"timestamp",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"()),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        )",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"send",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:"?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:[(0,n.jsxs)(t.p,{children:["The UpdateItem request uses an ",(0,n.jsx)(y.SectionLink,{focus:"6",id:"focus://6",children:(0,n.jsx)(t.code,{children:"update_expression"})})," in combination with the ",(0,n.jsx)(y.SectionLink,{focus:"7",id:"focus://7",children:(0,n.jsx)(t.code,{children:"expression_attribute_values"})})," to perform the operation.  The appearance of the ",(0,n.jsx)(y.SectionLink,{focus:"5",id:"focus://5",children:(0,n.jsx)(t.code,{children:"key"})})," is also back just like in the ",(0,n.jsx)(t.a,{href:"#getitem-request",children:"get_item"}),"."]}),(0,n.jsx)(y.SectionCode,{children:(0,n.jsx)(y.SectionCode,{})})]}),"\n",(0,n.jsx)(t.h3,{id:"deleteitem-request",children:"DeleteItem Request"}),"\n",(0,n.jsx)(t.p,{children:"DeleteItem is used to accomplish just what it describes.  When you want to Delete an Item in DynamoDB."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Deletes a single item in a table by primary key. You can perform a conditional delete operation that deletes the item if it exists, or if it has an expected attribute value. - AWS"}),"\n"]}),"\n",(0,n.jsxs)(y.Section,{codeConfig:a,northPanel:{tabs:["delete_item.rs"],active:"delete_item.rs",heightRatio:1},files:[{name:"delete_item.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"delete_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<(), ",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"delete_item",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"key",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(), ",props:{style:{color:"#D4D4D4"}}},{content:"AttributeValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"S",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"()))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"return_values",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"aws_sdk_dynamodb",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"types",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"ReturnValue",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"AllOld",props:{style:{color:"#4EC9B0"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"send",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:"?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    match ",props:{style:{color:"#C586C0"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"attributes",props:{style:{color:"#DCDCAA"}}},{content:"() {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"_",props:{style:{color:"#9CDCFE"}}},{content:") => ",props:{style:{color:"#D4D4D4"}}},{content:"Ok",props:{style:{color:"#4EC9B0"}}},{content:"(()),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        None",props:{style:{color:"#4EC9B0"}}},{content:" => ",props:{style:{color:"#D4D4D4"}}},{content:"Err",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"NotFound",props:{style:{color:"#4EC9B0"}}},{content:"),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:[(0,n.jsxs)(t.p,{children:["Using ",(0,n.jsx)(y.SectionLink,{focus:"3",id:"focus://3",children:(0,n.jsx)(t.code,{children:"delete_item"})})," will look a lot like ",(0,n.jsx)(t.a,{href:"#getitem-request",children:"get_item"})," and ",(0,n.jsx)(t.a,{href:"#updateitem-request",children:"update_item"})," in that it uses the ",(0,n.jsx)(y.SectionLink,{focus:"4",id:"focus://4",children:(0,n.jsx)(t.code,{children:"key"})})," function.  That key is the only thing that needs to be supplied from a payload standpoint."]}),(0,n.jsxs)(t.p,{children:["One thing to note is that this is returning ",(0,n.jsx)(y.SectionLink,{focus:"6",id:"focus://6",children:(0,n.jsx)(t.code,{children:"AllOld"})})," so that we can determine that the operation was ",(0,n.jsx)(y.SectionLink,{focus:"10:13",id:"focus://10:13",children:"successful and the item was found and deleted"}),"."]}),(0,n.jsx)(y.SectionCode,{children:(0,n.jsx)(y.SectionCode,{})})]}),"\n",(0,n.jsx)(t.h3,{id:"scan-request",children:"Scan Request"}),"\n",(0,n.jsx)(t.p,{children:"Scan is sometimes a dirty operation.  It doens't leverage any keys and just walks through the table.  In future articles, we will address pagination, but for this example, the below is just a simple Scan operation."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"The Scan operation returns one or more items and item attributes by accessing every item in a table or a secondary index. To have DynamoDB return fewer items, you can provide a FilterExpression operation. - AWS"}),"\n"]}),"\n",(0,n.jsx)(y.Section,{codeConfig:a,northPanel:{tabs:["scan.rs"],active:"scan.rs",heightRatio:1},files:[{name:"scan.rs",focus:"",code:{lines:[{tokens:[{content:"pub async fn ",props:{style:{color:"#569CD6"}}},{content:"get_items",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    client",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"Client",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    table_name",props:{style:{color:"#9CDCFE"}}},{content:": &",props:{style:{color:"#D4D4D4"}}},{content:"str",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    limit",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"i32",props:{style:{color:"#4EC9B0"}}}]},{tokens:[{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"Vec",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:">, ",props:{style:{color:"#D4D4D4"}}},{content:"QueryError",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"client",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"scan",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"limit",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"limit",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"table_name",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"send",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}},{content:"?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    match ",props:{style:{color:"#C586C0"}}},{content:"output",props:{style:{color:"#9CDCFE"}}},{content:".items {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            let mut ",props:{style:{color:"#569CD6"}}},{content:"entities",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Vec",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:"> = ",props:{style:{color:"#D4D4D4"}}},{content:"Vec",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            for ",props:{style:{color:"#C586C0"}}},{content:"i ",props:{style:{color:"#9CDCFE"}}},{content:"in ",props:{style:{color:"#569CD6"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                let ",props:{style:{color:"#569CD6"}}},{content:"entity",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"serde_dynamo",props:{style:{color:"#9CDCFE"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:"> = ",props:{style:{color:"#D4D4D4"}}},{content:"serde_dynamo",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from_item",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                match ",props:{style:{color:"#C586C0"}}},{content:"entity",props:{style:{color:"#9CDCFE"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"entity",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        entities",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"push",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"BasicEntity",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"from",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"entity",props:{style:{color:"#9CDCFE"}}},{content:"));",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    Err",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"e",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        error!",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"(Error)={:?}"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"e",props:{style:{color:"#9CDCFE"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"entities",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        None",props:{style:{color:"#4EC9B0"}}},{content:" => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Vec",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:(0,n.jsx)(y.SectionCode,{children:(0,n.jsx)(y.SectionCode,{})})}),"\n",(0,n.jsx)(t.h2,{id:"running-the-sample",children:"Running the Sample"}),"\n",(0,n.jsxs)(t.p,{children:["All of the above operations are available in the sample code found ",(0,n.jsx)(t.a,{href:"https://github.com/serverlessdevelopers/serverless-rust/tree/main/templates/patterns/database-patterns/ddb-basic-operations/",children:"./templates"}),".  You will find ",(0,n.jsx)(t.a,{href:"#creating-a-client",children:"client building"})," in addition to models, errors and a main function that will execute all of the examples."]}),"\n",(0,n.jsx)(t.p,{children:"In order to execute the code, make sure that you have three things configured:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["An AWS Account with a DynamoDB created with just a partition key defined as ",(0,n.jsx)(t.code,{children:"id"}),"."]}),"\n",(0,n.jsx)(t.li,{children:"Access locally to read/write/delete items from that DynamoDB table."}),"\n",(0,n.jsxs)(t.li,{children:["An environment variable called ",(0,n.jsx)(t.code,{children:"TABLE_NAME"})," set to the table name created in item 1."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"When running the same, you'll see the following occur."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"A loop is run 100 times"}),"\n",(0,n.jsx)(t.li,{children:"An item is created"}),"\n",(0,n.jsx)(t.li,{children:"Then it is fetched"}),"\n",(0,n.jsxs)(t.li,{children:["Every 10 items the UpdateItem operation is executed on the ",(0,n.jsx)(t.code,{children:"updated_at"})," field"]}),"\n",(0,n.jsx)(t.li,{children:"At the very end, the table is scanned and items are printed back out to the console"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"congratulations",children:"Congratulations"}),"\n",(0,n.jsx)(t.p,{children:"Congratulations, you've seen how to establish a new Client with DDB and Rust in addition to the basic data plane operations.  More to come on Pagination, Transactions and BatchItem Operations."})]})}const d=function(o={}){const{wrapper:t}=Object.assign({},(0,s.R)(),o.components);return t?(0,n.jsx)(t,Object.assign({},o,{children:(0,n.jsx)(C,o)})):C(o)};function h(o,t){throw new Error("Expected "+(t?"component":"object")+" `"+o+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);