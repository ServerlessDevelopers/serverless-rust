"use strict";(self.webpackChunkinteractive_docs=self.webpackChunkinteractive_docs||[]).push([[2366],{5217:(o,t,e)=>{e.r(t),e.d(t,{CH:()=>C,assets:()=>D,chCodeConfig:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>y});e(6540);var n=e(4848),s=e(8453),r=e(4754);const l={sidebar_position:2,title:"Lambda Function per Verb",description:"Lambda Function API per Verb",keywords:["rust","lambda","api gateway"]},c=void 0,p={id:"patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb",title:"Lambda Function per Verb",description:"Lambda Function API per Verb",source:"@site/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb.md",sourceDirName:"patterns/api-patterns",slug:"/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb",permalink:"/docs/patterns/api-patterns/cdk-cargo-lambda-lambda-per-verb-ddb",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Lambda Function per Verb",description:"Lambda Function API per Verb",keywords:["rust","lambda","api gateway"]},sidebar:"tutorialSidebar",previous:{title:"CORS Origin Allow List",permalink:"/docs/patterns/api-patterns/cors-domain-allow-list"},next:{title:"Web Framework on Lambda",permalink:"/docs/patterns/api-patterns/web-framework-on-lambda"}},D={},y=[{value:"Let&#39;s make some design choices",id:"lets-make-some-design-choices",level:2},{value:"Project structure",id:"project-structure",level:2},{value:"Lambda Code",id:"lambda-code",level:2},{value:"Post",id:"post",level:3},{value:"Get by ID",id:"get-by-id",level:3},{value:"Put by ID",id:"put-by-id",level:3},{value:"Delete by ID",id:"delete-by-id",level:3},{value:"Shared Code",id:"shared-code",level:2},{value:"Congrats",id:"congrats",level:2}],C={annotations:r.hk,Code:r.Cy,Section:r.wn,SectionCode:r.bx,SectionLink:r.W_},i={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:void 0,showCopyButton:void 0,themeName:"dark-plus"};function a(o){const t=Object.assign({p:"p",h2:"h2",ol:"ol",li:"li",a:"a",code:"code",h3:"h3"},(0,s.R)(),o.components);return C||h("CH",!1),C.Code||h("CH.Code",!0),C.Section||h("CH.Section",!0),C.SectionCode||h("CH.SectionCode",!0),C.SectionLink||h("CH.SectionLink",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="dark-plus"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #D4D4D4;--ch-t-background: #1E1E1E;--ch-t-lighter-inlineBackground: #1e1e1ee6;--ch-t-editor-background: #1E1E1E;--ch-t-editor-foreground: #D4D4D4;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #007FD4;--ch-t-tab-activeBackground: #1E1E1E;--ch-t-tab-activeForeground: #ffffff;--ch-t-tab-inactiveBackground: #2D2D2D;--ch-t-tab-inactiveForeground: #ffffff80;--ch-t-tab-border: #252526;--ch-t-tab-activeBorder: #1E1E1E;--ch-t-editorGroup-border: #444444;--ch-t-editorGroupHeader-tabsBackground: #252526;--ch-t-editorLineNumber-foreground: #858585;--ch-t-input-background: #3C3C3C;--ch-t-input-foreground: #D4D4D4;--ch-t-icon-foreground: #C5C5C5;--ch-t-sideBar-background: #252526;--ch-t-sideBar-foreground: #D4D4D4;--ch-t-sideBar-border: #252526;--ch-t-list-activeSelectionBackground: #094771;--ch-t-list-activeSelectionForeground: #fffffe;--ch-t-list-hoverBackground: #2A2D2E; }'}}),"\n",(0,n.jsx)(t.p,{children:"Writing an API with Lambda is a topic that is pretty well covered on the internet.  However, there are so many choices of packages, project structure, Lambda size, runtimes, and many other decisions that can overwhelm even the most accomplished builder.  Add into the mix the addition of Rust, and things take on an even different slant than with something you are comfortable with."}),"\n",(0,n.jsx)(t.p,{children:"If this feels like you, then let this article walk you through some design choices that'll help you get started.  And when you get to the end, you will be able to package this up and add your custom code and deploy something into AWS."}),"\n",(0,n.jsx)(t.h2,{id:"lets-make-some-design-choices",children:"Let's make some design choices"}),"\n",(0,n.jsx)(t.p,{children:"This article will take the following stances in order to allow you to focus on learning how to build an API with Rust."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Every verb in this REST API will have its own Lambda Handler"}),"\n",(0,n.jsxs)(t.li,{children:["Will make use of this ",(0,n.jsx)(t.a,{href:"https://docs.rs/lambda_http/latest/lambda_http/",children:"Crate"})," for handling events and dealing with the Proxy Request"]}),"\n",(0,n.jsx)(t.li,{children:"A shared library will be a part of the build to reuse code."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"With those clarifications out of the way, let's get started!"}),"\n",(0,n.jsx)(t.h2,{id:"project-structure",children:"Project structure"}),"\n",(0,n.jsxs)(t.p,{children:["Settling on a project structure is sometimes the hardest part of a new build.  For simplicity and order, I like to put my code in the root directory of the project under a folder named ",(0,n.jsx)(t.code,{children:"lambdas"}),".  I find that when I do that, I can also then segement my infrastructure as code into a separate directory named ",(0,n.jsx)(t.code,{children:"infra"}),".  When working on projects, it's easier to collapse my brain on half of the solution just like folding the directory in my editor."]}),"\n",(0,n.jsxs)(t.p,{children:["A template for this pattern can be found under the ",(0,n.jsx)(t.a,{href:"https://github.com/serverlessdevelopers/serverless-rust/tree/main/templates/patterns/api-patterns/lambda-per-verb/",children:"./templates"})," directory in the GitHub repo. You can use the template to get started building with API Gateway and Lambda."]}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"infra",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#D4D4D4"}}},{content:"to be filled out by your IaC",props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"lambdas",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#D4D4D4"}}},{content:"delete-by-id",props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#D4D4D4"}}},{content:"get-by-id",props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#D4D4D4"}}},{content:"post",props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#D4D4D4"}}},{content:"put-by-id",props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#D4D4D4"}}},{content:"shared",props:{style:{color:"#CE9178"}}}]}],lang:"bash"},annotations:[]}]}),"\n",(0,n.jsxs)(t.p,{children:["The balance of this tutorial will dig into most of the ",(0,n.jsx)(t.code,{children:"lambdas/<project>"})," solutions."]}),"\n",(0,n.jsx)(t.h2,{id:"lambda-code",children:"Lambda Code"}),"\n",(0,n.jsxs)(t.p,{children:["Let's start off with the ",(0,n.jsx)(t.code,{children:"post"})," Lambda"]}),"\n",(0,n.jsx)(t.h3,{id:"post",children:"Post"}),"\n",(0,n.jsxs)(C.Section,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"#[tokio::main]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"main",props:{style:{color:"#DCDCAA"}}},{content:"() -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<(), ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:">{",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    tracing_subscriber",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"fmt",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_max_level",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Level",props:{style:{color:"#4EC9B0"}}},{content:"::INFO)",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disable printing the name of the module in every log line.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_target",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"false",props:{style:{color:"#569CD6"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disabling time is handy because CloudWatch will add the ingestion time.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"without_time",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"init",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    run",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"service_fn",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"handler",props:{style:{color:"#9CDCFE"}}},{content:")).",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}],children:[(0,n.jsx)(t.p,{children:"For each of these Lambdas, the main function is going to look the same.  I won't focus on using AWS SDK Clients, they are simply going to demonstrate who to parse payloads and return serialized objects."}),(0,n.jsxs)(t.p,{children:["When operating a POST request, the client is going to send a JSON payloadt to the endpoint.  The Lambda will need to handle that event, dersialize it into the struct I want and then do something with that data.  Usually persist it somewhere, but in the below example, it's just going to return it back out as a ",(0,n.jsx)(t.code,{children:"ViewModel"})," object."]}),(0,n.jsx)(C.SectionCode,{}),(0,n.jsxs)(t.p,{children:["One thing to note is the ",(0,n.jsx)(C.SectionLink,{focus:"1[3:13]",id:"focus://1[3:13]",children:(0,n.jsx)(t.code,{children:"tokio macro"})})," macro.  Macros in Rust are signals to the compiler to generate some code based upon the macros' definition."]}),(0,n.jsxs)(t.p,{children:["The tokio macro allows the ",(0,n.jsx)(C.SectionLink,{focus:"2[10:14]",id:"focus://2[10:14]",children:(0,n.jsx)(t.code,{children:"main"})})," function to run asynchronous, which is what the Lambda handler function requires."]})]}),"\n",(0,n.jsx)(t.p,{children:"With the main function defined, the last piece to do is build the handler.  The code below is a little verbose, but simply to demonstrate the handling of Optional values that the Rust language provides.  This can be simplified in spots but will be just fine for the demo code."}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"handler",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"body",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"payload",props:{style:{color:"#DCDCAA"}}},{content:"::<",props:{style:{color:"#D4D4D4"}}},{content:"PostModel",props:{style:{color:"#4EC9B0"}}},{content:">();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    ",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    match ",props:{style:{color:"#C586C0"}}},{content:"body",props:{style:{color:"#9CDCFE"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            match ",props:{style:{color:"#C586C0"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    // convert to the model",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"into",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    // do some work",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"                    // convert back to view model",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"view_model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"into",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"serde_model",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"serde_json",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(&",props:{style:{color:"#D4D4D4"}}},{content:"view_model",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"200",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"serde_model",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                None",props:{style:{color:"#4EC9B0"}}},{content:" => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"400",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'""',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Err",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"e",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"400",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"e",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"Let's take a minute to walk through some key points of the above function."}),"\n",(0,n.jsxs)(t.p,{children:["First, by using the lambda_http crate, we gain some convienence methods that make working with requests easier.  The ",(0,n.jsx)(t.code,{children:"event.payload"})," line converts the incoming JSON body into the PostModel struct defined in the shared project."]}),"\n",(0,n.jsx)(t.p,{children:"The second thing to note is that this sample doesn't actually persist anything into the database but it still goes through the process of converting the incoming payload into a struct Model and then back out into a ViewModel."}),"\n",(0,n.jsxs)(t.p,{children:["The final point to pay attention to is that using the ",(0,n.jsx)(t.code,{children:"match"})," operation in Rust gives you a bunch of chances to shape the payload that is returned to the client."]}),"\n",(0,n.jsx)(t.h3,{id:"get-by-id",children:"Get by ID"}),"\n",(0,n.jsx)(t.p,{children:"With items persisting, you would have something to fetch from the database.  In the case of this handler, the sample is returning out a mocked Model and then converting it into a ViewModel."}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"lambda_http",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:", service_fn, run, ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Body",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"RequestPayloadExt",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"RequestExt",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::info;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"shared",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"#[tokio::main]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"main",props:{style:{color:"#DCDCAA"}}},{content:"() -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<(), ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:">{",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    tracing_subscriber",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"fmt",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_max_level",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Level",props:{style:{color:"#4EC9B0"}}},{content:"::INFO)",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disable printing the name of the module in every log line.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_target",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"false",props:{style:{color:"#569CD6"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disabling time is handy because CloudWatch will add the ingestion time.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"without_time",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"init",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    run",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"service_fn",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"handler",props:{style:{color:"#9CDCFE"}}},{content:")).",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"handler",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    // get the path parameter",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"path_parameters_ref",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"and_then",props:{style:{color:"#DCDCAA"}}},{content:"(|",props:{style:{color:"#D4D4D4"}}},{content:"params",props:{style:{color:"#9CDCFE"}}},{content:"| ",props:{style:{color:"#D4D4D4"}}},{content:"params",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"first",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:"))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"unwrap",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    info!",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id: {:?}"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    // fetch the model from the DB",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"New Model"',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"());",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    // convert to a view model",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"view_model",props:{style:{color:"#9CDCFE"}}},{content:":",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"into",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"view_mode_serde",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"serde_json",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(&",props:{style:{color:"#D4D4D4"}}},{content:"view_model",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"200",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"view_mode_serde",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}]}),"\n",(0,n.jsx)(t.h3,{id:"put-by-id",children:"Put by ID"}),"\n",(0,n.jsx)(t.p,{children:"Adding a PUT method will allow your clients to update the resources you expose.  The PUT endpoint combines the work we've been doing with POST and GET."}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"lambda_http",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:", service_fn, run, ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Body",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"RequestPayloadExt",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"RequestExt",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::info;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"shared",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"PostModel",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"PutModel",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"#[tokio::main]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"main",props:{style:{color:"#DCDCAA"}}},{content:"() -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<(), ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:">{",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    tracing_subscriber",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"fmt",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_max_level",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Level",props:{style:{color:"#4EC9B0"}}},{content:"::INFO)",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disable printing the name of the module in every log line.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_target",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"false",props:{style:{color:"#569CD6"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disabling time is handy because CloudWatch will add the ingestion time.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"without_time",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"init",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    run",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"service_fn",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"handler",props:{style:{color:"#9CDCFE"}}},{content:")).",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"handler",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    // get the path parameter",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"path_parameters_ref",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"and_then",props:{style:{color:"#DCDCAA"}}},{content:"(|",props:{style:{color:"#D4D4D4"}}},{content:"params",props:{style:{color:"#9CDCFE"}}},{content:"| ",props:{style:{color:"#D4D4D4"}}},{content:"params",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"first",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:"))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"unwrap",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    info!",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id: {:?}"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"body",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"payload",props:{style:{color:"#DCDCAA"}}},{content:"::<",props:{style:{color:"#D4D4D4"}}},{content:"PutModel",props:{style:{color:"#4EC9B0"}}},{content:">();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    match ",props:{style:{color:"#C586C0"}}},{content:"body",props:{style:{color:"#9CDCFE"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            match ",props:{style:{color:"#C586C0"}}},{content:"item",props:{style:{color:"#9CDCFE"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                Some",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    // convert to the model",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"i",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"into",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    // do some work",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"                    // convert back to view model",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"view_model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"into",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"serde_model",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"serde_json",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(&",props:{style:{color:"#D4D4D4"}}},{content:"view_model",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"200",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"serde_model",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                None",props:{style:{color:"#4EC9B0"}}},{content:" => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"400",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'""',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                        .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Err",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"e",props:{style:{color:"#9CDCFE"}}},{content:") => {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"400",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"e",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"                .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}]}),"\n",(0,n.jsx)(t.h3,{id:"delete-by-id",children:"Delete by ID"}),"\n",(0,n.jsx)(t.p,{children:"And lastly, there is the DELETE method.  Delete should grab the ID from the path and then execute the delete request and set the response to 204.  The most basic Lambda would look like this."}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"lambda_http",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:", service_fn, run, ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Body",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"RequestPayloadExt",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"RequestExt",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::info;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"shared",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"#[tokio::main]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"main",props:{style:{color:"#DCDCAA"}}},{content:"() -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<(), ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:">{",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    tracing_subscriber",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"fmt",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_max_level",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"tracing",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Level",props:{style:{color:"#4EC9B0"}}},{content:"::INFO)",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disable printing the name of the module in every log line.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"with_target",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"false",props:{style:{color:"#569CD6"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        // disabling time is handy because CloudWatch will add the ingestion time.",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"without_time",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"init",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    run",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"service_fn",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"handler",props:{style:{color:"#9CDCFE"}}},{content:")).",props:{style:{color:"#D4D4D4"}}},{content:"await",props:{style:{color:"#C586C0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"async fn ",props:{style:{color:"#569CD6"}}},{content:"handler",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Request",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Result",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"IntoResponse",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Error",props:{style:{color:"#4EC9B0"}}},{content:"> {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"event",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"path_parameters_ref",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"and_then",props:{style:{color:"#DCDCAA"}}},{content:"(|",props:{style:{color:"#D4D4D4"}}},{content:"params",props:{style:{color:"#9CDCFE"}}},{content:"| ",props:{style:{color:"#D4D4D4"}}},{content:"params",props:{style:{color:"#9CDCFE"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"first",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id"',props:{style:{color:"#CE9178"}}},{content:"))",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"unwrap",props:{style:{color:"#DCDCAA"}}},{content:"();",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    info!",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"id: {:?}"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:");",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    // execute the delete in the DB",props:{style:{color:"#6A9955"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    let ",props:{style:{color:"#569CD6"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"Response",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"builder",props:{style:{color:"#DCDCAA"}}},{content:"()",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"status",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"204",props:{style:{color:"#B5CEA8"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"header",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'"content-type"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"text/json"',props:{style:{color:"#CE9178"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"body",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:'""',props:{style:{color:"#CE9178"}}},{content:".",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"())",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        .",props:{style:{color:"#D4D4D4"}}},{content:"map_err",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"Box",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new",props:{style:{color:"#9CDCFE"}}},{content:")?;",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    Ok",props:{style:{color:"#4EC9B0"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"resp",props:{style:{color:"#9CDCFE"}}},{content:")",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}]}),"\n",(0,n.jsx)(t.h2,{id:"shared-code",children:"Shared Code"}),"\n",(0,n.jsxs)(t.p,{children:["At this point, you've got the shell of an API build with Rust and Lambda.  Every one of these functions though depended upon some shared code.  With the project structure outlined at the top of the article, a ",(0,n.jsx)(t.code,{children:"shared"})," directory which is a Rust Crate contains the models, data transfer objects, and other reusable code for these Lambdas.  Unlike interperted languages, Rust code needs to have these shared pieces of functionality compiled into the final binary."]}),"\n",(0,n.jsxs)(t.p,{children:["Rust crates can take on many shapes, but in its most basic form, it can simply be a project that has a ",(0,n.jsx)(t.code,{children:"lib.rs"})," file where the structs and functions are defined."]}),"\n",(0,n.jsxs)(t.p,{children:["The shared ",(0,n.jsx)(t.code,{children:"lib.rs"})," that supports the above code defines its structs and functions in the below sample."]}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"serde",props:{style:{color:"#4EC9B0"}}},{content:"::{",props:{style:{color:"#D4D4D4"}}},{content:"Deserialize",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Serialize",props:{style:{color:"#4EC9B0"}}},{content:"};",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"use ",props:{style:{color:"#569CD6"}}},{content:"uuid",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"Uuid",props:{style:{color:"#4EC9B0"}}},{content:";",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"pub struct ",props:{style:{color:"#569CD6"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"#[derive(",props:{style:{color:"#D4D4D4"}}},{content:"Serialize",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Debug",props:{style:{color:"#4EC9B0"}}},{content:")]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"pub struct ",props:{style:{color:"#569CD6"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"#[derive(",props:{style:{color:"#D4D4D4"}}},{content:"Deserialize",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Debug",props:{style:{color:"#4EC9B0"}}},{content:")]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"pub struct ",props:{style:{color:"#569CD6"}}},{content:"PostModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"#[derive(",props:{style:{color:"#D4D4D4"}}},{content:"Deserialize",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"Debug",props:{style:{color:"#4EC9B0"}}},{content:")]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"pub struct ",props:{style:{color:"#569CD6"}}},{content:"PutModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:",",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub ",props:{style:{color:"#569CD6"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub fn ",props:{style:{color:"#569CD6"}}},{content:"new",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Uuid",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new_v4",props:{style:{color:"#DCDCAA"}}},{content:"().",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            name",props:{style:{color:"#9CDCFE"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    pub fn ",props:{style:{color:"#569CD6"}}},{content:"new",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"String",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" { ",props:{style:{color:"#D4D4D4"}}},{content:"id",props:{style:{color:"#9CDCFE"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"name",props:{style:{color:"#9CDCFE"}}},{content:" }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"From",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:"> ",props:{style:{color:"#D4D4D4"}}},{content:"for ",props:{style:{color:"#C586C0"}}},{content:"ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    fn ",props:{style:{color:"#569CD6"}}},{content:"from",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Self",props:{style:{color:"#569CD6"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        ViewModel",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".id,",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".name",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"From",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"PostModel",props:{style:{color:"#4EC9B0"}}},{content:"> ",props:{style:{color:"#D4D4D4"}}},{content:"for ",props:{style:{color:"#C586C0"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    fn ",props:{style:{color:"#569CD6"}}},{content:"from",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"PostModel",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Self",props:{style:{color:"#569CD6"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"Uuid",props:{style:{color:"#4EC9B0"}}},{content:"::",props:{style:{color:"#D4D4D4"}}},{content:"new_v4",props:{style:{color:"#DCDCAA"}}},{content:"().",props:{style:{color:"#D4D4D4"}}},{content:"to_string",props:{style:{color:"#DCDCAA"}}},{content:"(),",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".name",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"impl ",props:{style:{color:"#569CD6"}}},{content:"From",props:{style:{color:"#4EC9B0"}}},{content:"<",props:{style:{color:"#D4D4D4"}}},{content:"PutModel",props:{style:{color:"#4EC9B0"}}},{content:"> ",props:{style:{color:"#D4D4D4"}}},{content:"for ",props:{style:{color:"#C586C0"}}},{content:"Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    fn ",props:{style:{color:"#569CD6"}}},{content:"from",props:{style:{color:"#DCDCAA"}}},{content:"(",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"PutModel",props:{style:{color:"#4EC9B0"}}},{content:") -> ",props:{style:{color:"#D4D4D4"}}},{content:"Self",props:{style:{color:"#569CD6"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        Model",props:{style:{color:"#4EC9B0"}}},{content:" {",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            id",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".id,",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"            name",props:{style:{color:"#9CDCFE"}}},{content:": ",props:{style:{color:"#D4D4D4"}}},{content:"model",props:{style:{color:"#9CDCFE"}}},{content:".name",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"        }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"}",props:{style:{color:"#D4D4D4"}}}]}],lang:"rust"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"And to use this code in the Lambda binaries, add this line to the Cargo.toml file in each of the Lambdas."}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"[package]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"name",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"get-by-id"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"version.workspace",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"true",props:{style:{color:"#569CD6"}}}]},{tokens:[{content:"edition.workspace",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"true",props:{style:{color:"#569CD6"}}}]},{tokens:[{content:"authors.workspace",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"true",props:{style:{color:"#569CD6"}}}]},{tokens:[{content:"license.workspace",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:"true",props:{style:{color:"#569CD6"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"[dependencies]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"shared",props:{style:{color:"#9CDCFE"}}},{content:" = { ",props:{style:{color:"#D4D4D4"}}},{content:"path",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"../shared"',props:{style:{color:"#CE9178"}}},{content:" }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"lambda_http",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"0.10.0"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"tokio",props:{style:{color:"#9CDCFE"}}},{content:" = { ",props:{style:{color:"#D4D4D4"}}},{content:"version",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.36.0"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"features",props:{style:{color:"#9CDCFE"}}},{content:" = [",props:{style:{color:"#D4D4D4"}}},{content:'"macros"',props:{style:{color:"#CE9178"}}},{content:"] }",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"tracing-subscriber",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"0.3.18"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"tracing",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"0.1.40"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"uuid",props:{style:{color:"#9CDCFE"}}},{content:" = { ",props:{style:{color:"#D4D4D4"}}},{content:"version",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.7.0"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:"features",props:{style:{color:"#9CDCFE"}}},{content:" = [",props:{style:{color:"#D4D4D4"}}},{content:'"v4"',props:{style:{color:"#CE9178"}}},{content:",",props:{style:{color:"#D4D4D4"}}},{content:'"fast-rng"',props:{style:{color:"#CE9178"}}},{content:",",props:{style:{color:"#D4D4D4"}}},{content:'"macro-diagnostics"',props:{style:{color:"#CE9178"}}},{content:"]}",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"serde_json",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.0.114"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]}],lang:"toml"},annotations:[]}]}),"\n",(0,n.jsx)(t.p,{children:"And to wrap it all up, the Worspace Cargo.toml file that pulls everything together."}),"\n",(0,n.jsx)(C.Code,{codeConfig:i,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"[workspace]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"members",props:{style:{color:"#9CDCFE"}}},{content:" = [ ",props:{style:{color:"#D4D4D4"}}},{content:'"lambdas/delete-by-id"',props:{style:{color:"#CE9178"}}},{content:",",props:{style:{color:"#D4D4D4"}}},{content:'"lambdas/get-by-id"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"lambdas/post"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"lambdas/put-by-id"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"lambdas/shared"',props:{style:{color:"#CE9178"}}},{content:"]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"resolver",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"2"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"[workspace.package]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"version",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"1.0.0"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"authors",props:{style:{color:"#9CDCFE"}}},{content:" = [",props:{style:{color:"#D4D4D4"}}},{content:'"Benjamen Pyle"',props:{style:{color:"#CE9178"}}},{content:", ",props:{style:{color:"#D4D4D4"}}},{content:'"James Eastham"',props:{style:{color:"#CE9178"}}},{content:"]",props:{style:{color:"#D4D4D4"}}}]},{tokens:[{content:"license",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"GPL-3"',props:{style:{color:"#CE9178"}}}]},{tokens:[{content:"edition",props:{style:{color:"#9CDCFE"}}},{content:" = ",props:{style:{color:"#D4D4D4"}}},{content:'"2021"',props:{style:{color:"#CE9178"}}}]}],lang:"toml"},annotations:[]}]}),"\n",(0,n.jsx)(t.h2,{id:"congrats",children:"Congrats"}),"\n",(0,n.jsx)(t.p,{children:"And with that, you know have an API with a Lambda per Verb built in Rust!"})]})}const d=function(o={}){const{wrapper:t}=Object.assign({},(0,s.R)(),o.components);return t?(0,n.jsx)(t,Object.assign({},o,{children:(0,n.jsx)(a,o)})):a(o)};function h(o,t){throw new Error("Expected "+(t?"component":"object")+" `"+o+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);