"use strict";(self.webpackChunkinteractive_docs=self.webpackChunkinteractive_docs||[]).push([[6387],{2706:(e,t,n)=>{n.r(t),n.d(t,{CH:()=>h,assets:()=>c,chCodeConfig:()=>u,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>l});n(6540);var o=n(4848),a=n(8453),s=n(4754);const i={sidebar_position:2,title:"How Lambda Works",description:"A walkthrough of the key concepts around AWS Lambda and how it executes",keywords:["fundamentals"]},r="How Lambda Works",d={id:"fundamentals/how-lambda-works",title:"How Lambda Works",description:"A walkthrough of the key concepts around AWS Lambda and how it executes",source:"@site/docs/fundamentals/how-lambda-works.md",sourceDirName:"fundamentals",slug:"/fundamentals/how-lambda-works",permalink:"/docs/fundamentals/how-lambda-works",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"How Lambda Works",description:"A walkthrough of the key concepts around AWS Lambda and how it executes",keywords:["fundamentals"]},sidebar:"tutorialSidebar",previous:{title:"AWS SDK for Rust",permalink:"/docs/fundamentals/aws-sdk-rust"},next:{title:"Structure of a Lambda function",permalink:"/docs/fundamentals/structure-of-a-lambda"}},c={},l=[{value:"1. A new request is received",id:"1-a-new-request-is-received",level:3},{value:"2. The request is passed to Lambda",id:"2-the-request-is-passed-to-lambda",level:3},{value:"3. Post Execution",id:"3-post-execution",level:3},{value:"Handling Multiple Requests",id:"handling-multiple-requests",level:2},{value:"Cold Starts",id:"cold-starts",level:2}],h={annotations:s.hk,InlineCode:s.R0},u={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:void 0,showCopyButton:void 0,themeName:"dark-plus"};function m(e){const t=Object.assign({h1:"h1",p:"p",h3:"h3",ul:"ul",li:"li",a:"a",h2:"h2",strong:"strong"},(0,a.R)(),e.components);return h||f("CH",!1),h.InlineCode||f("CH.InlineCode",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="dark-plus"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #D4D4D4;--ch-t-background: #1E1E1E;--ch-t-lighter-inlineBackground: #1e1e1ee6;--ch-t-editor-background: #1E1E1E;--ch-t-editor-foreground: #D4D4D4;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #007FD4;--ch-t-tab-activeBackground: #1E1E1E;--ch-t-tab-activeForeground: #ffffff;--ch-t-tab-inactiveBackground: #2D2D2D;--ch-t-tab-inactiveForeground: #ffffff80;--ch-t-tab-border: #252526;--ch-t-tab-activeBorder: #1E1E1E;--ch-t-editorGroup-border: #444444;--ch-t-editorGroupHeader-tabsBackground: #252526;--ch-t-editorLineNumber-foreground: #858585;--ch-t-input-background: #3C3C3C;--ch-t-input-foreground: #D4D4D4;--ch-t-icon-foreground: #C5C5C5;--ch-t-sideBar-background: #252526;--ch-t-sideBar-foreground: #D4D4D4;--ch-t-sideBar-border: #252526;--ch-t-list-activeSelectionBackground: #094771;--ch-t-list-activeSelectionForeground: #fffffe;--ch-t-list-hoverBackground: #2A2D2E; }'}}),"\n",(0,o.jsx)(t.h1,{id:"how-lambda-works",children:"How Lambda Works"}),"\n",(0,o.jsx)(t.p,{children:"AWS Lambda is an event-driven way of running your application workloads. Lambda only runs when there is an event for it to react to, and there is no charge for when your function is not executing."}),"\n",(0,o.jsx)(t.p,{children:"But you might be wondering how Lambda actually works! Let's walk through this step by step:"}),"\n",(0,o.jsx)(t.h3,{id:"1-a-new-request-is-received",children:"1. A new request is received"}),"\n",(0,o.jsxs)(t.p,{children:["Ok, so a new request has come into your Lambda function and Lambda needs to react to it. The first thing that happens is that the Lambda service prepares an ",(0,o.jsx)(h.InlineCode,{codeConfig:u,code:{lines:[{tokens:[{content:"execution environment",props:{style:{color:"#9CDCFE"}}}]}],lang:"jsx"},children:"execution environment"}),". During this step, the Lambda service:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Initializes the runtime"}),"\n",(0,o.jsxs)(t.li,{children:["Downloads your function code from either ",(0,o.jsx)(t.a,{href:"https://aws.amazon.com/s3/",children:"Amazon S3"})," or ",(0,o.jsx)(t.a,{href:"https://aws.amazon.com/ecr/",children:"Amazon ECR"})]}),"\n",(0,o.jsx)(t.li,{children:"Runs any initialization code outside of your function handler"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["The time all of that takes is what is known as a ",(0,o.jsx)(h.InlineCode,{codeConfig:u,code:{lines:[{tokens:[{content:"cold start",props:{style:{color:"#9CDCFE"}}}]}],lang:"jsx"},children:"cold start"}),". You'll see that come up a lot when we talk about Lambda."]}),"\n",(0,o.jsx)(t.h3,{id:"2-the-request-is-passed-to-lambda",children:"2. The request is passed to Lambda"}),"\n",(0,o.jsx)(t.p,{children:"Now that there is an execution environment available your function handler can execute. Lambda passes the payload to your function and your code runs. In Rust, the runtime itself can (de)serialize this event payload into a Rust struct. More on that in the next section!"}),"\n",(0,o.jsx)(t.h3,{id:"3-post-execution",children:"3. Post Execution"}),"\n",(0,o.jsxs)(t.p,{children:["After your function handler has completed the Lambda execution, the environment is frozen. To improve performance the execution environment is retained for a period of time. If another request is received at this point the same execution environment will be re-used. This is what is known as a ",(0,o.jsx)(h.InlineCode,{codeConfig:u,code:{lines:[{tokens:[{content:"warm start",props:{style:{color:"#9CDCFE"}}}]}],lang:"jsx"},children:"warm start"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"handling-multiple-requests",children:"Handling Multiple Requests"}),"\n",(0,o.jsxs)(t.p,{children:["We've walked through a simple example there in which Lambda receives a single request. But what happens if Lambda receives 2, 10, 1000 requests simultaneously. An important thing to remember is that each execution environment will only ever process ",(0,o.jsx)(t.strong,{children:"one request at any one time"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["What this means is that if you received 10 requests simultaneously, you are likely to get 10 cold starts and 10 separate execution environments (providing there aren't any existing ones). As a default, you can have 1000 concurrent Lambda executions, but that is a soft limit and can be raised. Check out the ",(0,o.jsx)(t.a,{href:"https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html",children:"quotas on the AWS Docs"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"cold-starts",children:"Cold Starts"}),"\n",(0,o.jsxs)(t.p,{children:["A quick note on ",(0,o.jsx)(h.InlineCode,{codeConfig:u,code:{lines:[{tokens:[{content:"cold starts",props:{style:{color:"#9CDCFE"}}}]}],lang:"jsx"},children:"cold starts"}),". Cold starts typically occur in a small number of production workloads, especially if you have consistent traffic patterns. However, in development you will see a ",(0,o.jsx)(h.InlineCode,{codeConfig:u,code:{lines:[{tokens:[{content:"cold start",props:{style:{color:"#9CDCFE"}}}]}],lang:"jsx"},children:"cold start"})," after every change to your Lambda function."]}),"\n",(0,o.jsx)(t.p,{children:"When you update the code for your function, you are guaranteed to get a brand new execution environment. When developing, this can give the impression that Lambda is always going to be slow."}),"\n",(0,o.jsx)(t.p,{children:"It's important to look at this through the lens of your production load and in a later section we will explore things you can do to analyze the number of cold starts in your environment."})]})}const p=function(e={}){const{wrapper:t}=Object.assign({},(0,a.R)(),e.components);return t?(0,o.jsx)(t,Object.assign({},e,{children:(0,o.jsx)(m,e)})):m(e)};function f(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);